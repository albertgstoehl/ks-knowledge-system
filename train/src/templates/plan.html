{% extends "base.html" %}
{% import "components.html" as ui %}
{% block content %}
<div class="page-header">
  <h2>Training Plan</h2>
</div>

<div id="plan-body" class="plan-content">Loading...</div>
{% endblock %}

{% block scripts %}
<script>
fetch("{{ base_path }}/api/plan/current")
  .then((response) => {
    if (!response.ok) {
      throw new Error("No plan found");
    }
    return response.json();
  })
  .then((data) => {
    document.getElementById("plan-body").innerText = data.markdown;
  })
  .catch((error) => {
    document.getElementById("plan-body").innerText = "No plan registered yet. Upload a plan markdown file to get started.";
  });
</script>
{% endblock %}
